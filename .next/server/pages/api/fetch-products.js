"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/fetch-products";
exports.ids = ["pages/api/fetch-products"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffetch-products&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfetch-products.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffetch-products&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfetch-products.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_fetch_products_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\fetch-products.js */ \"(api)/./pages/api/fetch-products.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_fetch_products_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_fetch_products_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/fetch-products\",\n        pathname: \"/api/fetch-products\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_fetch_products_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmZldGNoLXByb2R1Y3RzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNmZXRjaC1wcm9kdWN0cy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUM0RDtBQUM1RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMseURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHlEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3BlcmZ1bWUtdHJhY2tlci8/ZWFlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGZldGNoLXByb2R1Y3RzLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZmV0Y2gtcHJvZHVjdHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9mZXRjaC1wcm9kdWN0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffetch-products&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfetch-products.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/fetch-products.js":
/*!*************************************!*\
  !*** ./pages/api/fetch-products.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// Helper to strip HTML tags from product descriptions\nconst stripHtml = (html)=>html ? html.replace(/<[^>]*>?/gm, \"\") : \"\";\n// Fallback exchange rates in case the live API fails.\nconst FALLBACK_CAD_TO_EUR_RATE = 0.68;\nconst FALLBACK_AED_TO_EUR_RATE = 0.25;\n// Maps product data for Middle Eastern perfumes (Originals)\nconst mapMiddleEasternProduct = (product)=>{\n    const variant = product.variants.length > 0 ? product.variants[0] : null;\n    const price = variant ? parseFloat(variant.price) : 0;\n    const image = product.images.length > 0 ? product.images[0].src : null;\n    return {\n        id: `me-${product.id}`,\n        brand: product.vendor,\n        name: product.title,\n        details: stripHtml(product.body_html),\n        node: product.product_type || \"Perfume\",\n        price: price,\n        currency: \"EUR\",\n        image: image,\n        isReplica: false,\n        region: \"middle-east\",\n        source: \"dubaioud.ie\",\n        variantId: variant ? variant.id : null,\n        sourceUrl: `https://dubaioud.ie/products/${product.handle}`\n    };\n};\n// Maps product data for Western perfumes (Originals)\nconst mapWesternProduct = (product, exchangeRate)=>{\n    const variant = product.variants.length > 0 ? product.variants[0] : null;\n    const priceCAD = variant ? parseFloat(variant.price) : 0;\n    const image = product.images.length > 0 ? product.images[0].src : null;\n    return {\n        id: `w-${product.id}`,\n        brand: product.vendor,\n        name: product.title,\n        details: stripHtml(product.body_html),\n        node: product.product_type || \"Perfume\",\n        price: priceCAD * exchangeRate,\n        currency: \"EUR\",\n        image: image,\n        isReplica: false,\n        region: \"western\",\n        source: \"westernperfumes.ca\",\n        variantId: null,\n        sourceUrl: `https://westernperfumes.ca/products/${product.handle}`\n    };\n};\n// Maps product data for Replica perfumes\nconst mapReplicaProduct = (product, exchangeRate)=>{\n    const variant = product.variants.length > 0 ? product.variants[0] : null;\n    const priceAED = variant ? parseFloat(variant.price) : 0;\n    const image = product.images.length > 0 ? product.images[0].src : null;\n    return {\n        id: `rep-${product.id}`,\n        brand: product.vendor,\n        name: product.title,\n        details: stripHtml(product.body_html),\n        node: product.product_type || \"Perfume\",\n        price: priceAED * exchangeRate,\n        currency: \"EUR\",\n        image: image,\n        isReplica: true,\n        region: \"middle-east\",\n        source: \"parfum.ae\",\n        variantId: null,\n        sourceUrl: `https://parfum.ae/products/${product.handle}`\n    };\n};\n// Helper to fetch with a timeout\nconst fetchWithTimeout = (url, timeout = 10000)=>{\n    const controller = new AbortController();\n    const id = setTimeout(()=>controller.abort(), timeout);\n    return fetch(url, {\n        signal: controller.signal\n    }).finally(()=>{\n        clearTimeout(id);\n    });\n};\nasync function handler(req, res) {\n    // Fetch live exchange rates\n    let cadToEurRate = FALLBACK_CAD_TO_EUR_RATE;\n    let aedToEurRate = FALLBACK_AED_TO_EUR_RATE;\n    try {\n        const cadRateResponse = await fetch(\"https://api.frankfurter.app/latest?from=CAD&to=EUR\");\n        if (cadRateResponse.ok) {\n            const rateData = await cadRateResponse.json();\n            if (rateData && rateData.rates && rateData.rates.EUR) {\n                cadToEurRate = rateData.rates.EUR;\n            } else {\n                console.error(\"Live CAD exchange rate format is invalid, using fallback.\");\n            }\n        } else {\n            console.error(\"Failed to fetch live CAD exchange rate, using fallback.\");\n        }\n    } catch (error) {\n        console.error(\"Error fetching CAD exchange rate, using fallback:\", error);\n    }\n    try {\n        const aedRateResponse = await fetch(\"https://api.frankfurter.app/latest?from=AED&to=EUR\");\n        if (aedRateResponse.ok) {\n            const rateData = await aedRateResponse.json();\n            if (rateData && rateData.rates && rateData.rates.EUR) {\n                aedToEurRate = rateData.rates.EUR;\n            } else {\n                console.error(\"Live AED exchange rate format is invalid, using fallback.\");\n            }\n        } else {\n            console.error(\"Failed to fetch live AED exchange rate, using fallback.\");\n        }\n    } catch (error) {\n        console.error(\"Error fetching AED exchange rate, using fallback:\", error);\n    }\n    const dubaiOudApiUrl = \"https://dubaioud.ie/products.json?limit=250\";\n    const westernPerfumesApiUrl = \"https://westernperfumes.ca/products.json?limit=250\";\n    const parfumAeApiUrl = \"https://parfum.ae/products.json?limit=250\";\n    try {\n        const [dubaiOudResponse, westernPerfumesResponse, parfumAeResponse] = await Promise.allSettled([\n            fetchWithTimeout(dubaiOudApiUrl),\n            fetchWithTimeout(westernPerfumesApiUrl),\n            fetchWithTimeout(parfumAeApiUrl)\n        ]);\n        let products = [];\n        if (dubaiOudResponse.status === \"fulfilled\" && dubaiOudResponse.value.ok) {\n            const data = await dubaiOudResponse.value.json();\n            if (data && Array.isArray(data.products)) {\n                products.push(...data.products.map(mapMiddleEasternProduct));\n            }\n        } else {\n            console.error(\"Failed to fetch data from Dubai Oud API:\", dubaiOudResponse.reason || dubaiOudResponse.value?.statusText);\n        }\n        if (westernPerfumesResponse.status === \"fulfilled\" && westernPerfumesResponse.value.ok) {\n            const data = await westernPerfumesResponse.value.json();\n            if (data && Array.isArray(data.products)) {\n                products.push(...data.products.map((p)=>mapWesternProduct(p, cadToEurRate)));\n            }\n        } else {\n            console.error(\"Failed to fetch data from Western Perfumes API:\", westernPerfumesResponse.reason || westernPerfumesResponse.value?.statusText);\n        }\n        if (parfumAeResponse.status === \"fulfilled\" && parfumAeResponse.value.ok) {\n            const data = await parfumAeResponse.value.json();\n            if (data && Array.isArray(data.products)) {\n                products.push(...data.products.map((p)=>mapReplicaProduct(p, aedToEurRate)));\n            }\n        } else {\n            console.error(\"Failed to fetch data from Parfum.ae API:\", parfumAeResponse.reason || parfumAeResponse.value?.statusText);\n        }\n        res.status(200).json(products);\n    } catch (error) {\n        console.error(\"Internal Server Error:\", error);\n        res.status(500).json({\n            message: \"An internal server error occurred.\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZmV0Y2gtcHJvZHVjdHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHNEQUFzRDtBQUN0RCxNQUFNQSxZQUFZLENBQUNDLE9BQVVBLE9BQU9BLEtBQUtDLE9BQU8sQ0FBQyxjQUFjLE1BQU07QUFFckUsc0RBQXNEO0FBQ3RELE1BQU1DLDJCQUEyQjtBQUNqQyxNQUFNQywyQkFBMkI7QUFFakMsNERBQTREO0FBQzVELE1BQU1DLDBCQUEwQixDQUFDQztJQUMvQixNQUFNQyxVQUFVRCxRQUFRRSxRQUFRLENBQUNDLE1BQU0sR0FBRyxJQUFJSCxRQUFRRSxRQUFRLENBQUMsRUFBRSxHQUFHO0lBQ3BFLE1BQU1FLFFBQVFILFVBQVVJLFdBQVdKLFFBQVFHLEtBQUssSUFBSTtJQUNwRCxNQUFNRSxRQUFRTixRQUFRTyxNQUFNLENBQUNKLE1BQU0sR0FBRyxJQUFJSCxRQUFRTyxNQUFNLENBQUMsRUFBRSxDQUFDQyxHQUFHLEdBQUc7SUFFbEUsT0FBTztRQUNMQyxJQUFJLENBQUMsR0FBRyxFQUFFVCxRQUFRUyxFQUFFLENBQUMsQ0FBQztRQUN0QkMsT0FBT1YsUUFBUVcsTUFBTTtRQUNyQkMsTUFBTVosUUFBUWEsS0FBSztRQUNuQkMsU0FBU3BCLFVBQVVNLFFBQVFlLFNBQVM7UUFDcENDLE1BQU1oQixRQUFRaUIsWUFBWSxJQUFJO1FBQzlCYixPQUFPQTtRQUNQYyxVQUFVO1FBQ1ZaLE9BQU9BO1FBQ1BhLFdBQVc7UUFDWEMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLFdBQVdyQixVQUFVQSxRQUFRUSxFQUFFLEdBQUc7UUFDbENjLFdBQVcsQ0FBQyw2QkFBNkIsRUFBRXZCLFFBQVF3QixNQUFNLENBQUMsQ0FBQztJQUM3RDtBQUNGO0FBRUEscURBQXFEO0FBQ3JELE1BQU1DLG9CQUFvQixDQUFDekIsU0FBUzBCO0lBQ2hDLE1BQU16QixVQUFVRCxRQUFRRSxRQUFRLENBQUNDLE1BQU0sR0FBRyxJQUFJSCxRQUFRRSxRQUFRLENBQUMsRUFBRSxHQUFHO0lBQ3BFLE1BQU15QixXQUFXMUIsVUFBVUksV0FBV0osUUFBUUcsS0FBSyxJQUFJO0lBQ3ZELE1BQU1FLFFBQVFOLFFBQVFPLE1BQU0sQ0FBQ0osTUFBTSxHQUFHLElBQUlILFFBQVFPLE1BQU0sQ0FBQyxFQUFFLENBQUNDLEdBQUcsR0FBRztJQUVsRSxPQUFPO1FBQ0xDLElBQUksQ0FBQyxFQUFFLEVBQUVULFFBQVFTLEVBQUUsQ0FBQyxDQUFDO1FBQ3JCQyxPQUFPVixRQUFRVyxNQUFNO1FBQ3JCQyxNQUFNWixRQUFRYSxLQUFLO1FBQ25CQyxTQUFTcEIsVUFBVU0sUUFBUWUsU0FBUztRQUNwQ0MsTUFBTWhCLFFBQVFpQixZQUFZLElBQUk7UUFDOUJiLE9BQU91QixXQUFXRDtRQUNsQlIsVUFBVTtRQUNWWixPQUFPQTtRQUNQYSxXQUFXO1FBQ1hDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxXQUFXO1FBQ1hDLFdBQVcsQ0FBQyxvQ0FBb0MsRUFBRXZCLFFBQVF3QixNQUFNLENBQUMsQ0FBQztJQUNwRTtBQUNKO0FBRUEseUNBQXlDO0FBQ3pDLE1BQU1JLG9CQUFvQixDQUFDNUIsU0FBUzBCO0lBQ2hDLE1BQU16QixVQUFVRCxRQUFRRSxRQUFRLENBQUNDLE1BQU0sR0FBRyxJQUFJSCxRQUFRRSxRQUFRLENBQUMsRUFBRSxHQUFHO0lBQ3BFLE1BQU0yQixXQUFXNUIsVUFBVUksV0FBV0osUUFBUUcsS0FBSyxJQUFJO0lBQ3ZELE1BQU1FLFFBQVFOLFFBQVFPLE1BQU0sQ0FBQ0osTUFBTSxHQUFHLElBQUlILFFBQVFPLE1BQU0sQ0FBQyxFQUFFLENBQUNDLEdBQUcsR0FBRztJQUVsRSxPQUFPO1FBQ0xDLElBQUksQ0FBQyxJQUFJLEVBQUVULFFBQVFTLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZCQyxPQUFPVixRQUFRVyxNQUFNO1FBQ3JCQyxNQUFNWixRQUFRYSxLQUFLO1FBQ25CQyxTQUFTcEIsVUFBVU0sUUFBUWUsU0FBUztRQUNwQ0MsTUFBTWhCLFFBQVFpQixZQUFZLElBQUk7UUFDOUJiLE9BQU95QixXQUFXSDtRQUNsQlIsVUFBVTtRQUNWWixPQUFPQTtRQUNQYSxXQUFXO1FBQ1hDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxXQUFXO1FBQ1hDLFdBQVcsQ0FBQywyQkFBMkIsRUFBRXZCLFFBQVF3QixNQUFNLENBQUMsQ0FBQztJQUMzRDtBQUNKO0FBRUEsaUNBQWlDO0FBQ2pDLE1BQU1NLG1CQUFtQixDQUFDQyxLQUFLQyxVQUFVLEtBQUs7SUFDMUMsTUFBTUMsYUFBYSxJQUFJQztJQUN2QixNQUFNekIsS0FBSzBCLFdBQVcsSUFBTUYsV0FBV0csS0FBSyxJQUFJSjtJQUVoRCxPQUFPSyxNQUFNTixLQUFLO1FBQUVPLFFBQVFMLFdBQVdLLE1BQU07SUFBQyxHQUMzQ0MsT0FBTyxDQUFDO1FBQ1BDLGFBQWEvQjtJQUNmO0FBQ047QUFFZSxlQUFlZ0MsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLDRCQUE0QjtJQUM1QixJQUFJQyxlQUFlL0M7SUFDbkIsSUFBSWdELGVBQWUvQztJQUVuQixJQUFJO1FBQ0YsTUFBTWdELGtCQUFrQixNQUFNVCxNQUFNO1FBQ3BDLElBQUlTLGdCQUFnQkMsRUFBRSxFQUFFO1lBQ3RCLE1BQU1DLFdBQVcsTUFBTUYsZ0JBQWdCRyxJQUFJO1lBQzNDLElBQUlELFlBQVlBLFNBQVNFLEtBQUssSUFBSUYsU0FBU0UsS0FBSyxDQUFDQyxHQUFHLEVBQUU7Z0JBQ3BEUCxlQUFlSSxTQUFTRSxLQUFLLENBQUNDLEdBQUc7WUFDbkMsT0FBTztnQkFDTEMsUUFBUUMsS0FBSyxDQUFDO1lBQ2hCO1FBQ0YsT0FBTztZQUNMRCxRQUFRQyxLQUFLLENBQUM7UUFDaEI7SUFDRixFQUFFLE9BQU9BLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLHFEQUFxREE7SUFDckU7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsa0JBQWtCLE1BQU1qQixNQUFNO1FBQ3BDLElBQUlpQixnQkFBZ0JQLEVBQUUsRUFBRTtZQUN0QixNQUFNQyxXQUFXLE1BQU1NLGdCQUFnQkwsSUFBSTtZQUMzQyxJQUFJRCxZQUFZQSxTQUFTRSxLQUFLLElBQUlGLFNBQVNFLEtBQUssQ0FBQ0MsR0FBRyxFQUFFO2dCQUNwRE4sZUFBZUcsU0FBU0UsS0FBSyxDQUFDQyxHQUFHO1lBQ25DLE9BQU87Z0JBQ0xDLFFBQVFDLEtBQUssQ0FBQztZQUNoQjtRQUNGLE9BQU87WUFDTEQsUUFBUUMsS0FBSyxDQUFDO1FBQ2hCO0lBQ0YsRUFBRSxPQUFPQSxPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxxREFBcURBO0lBQ3JFO0lBRUEsTUFBTUUsaUJBQWlCO0lBQ3ZCLE1BQU1DLHdCQUF3QjtJQUM5QixNQUFNQyxpQkFBaUI7SUFFdkIsSUFBSTtRQUNGLE1BQU0sQ0FBQ0Msa0JBQWtCQyx5QkFBeUJDLGlCQUFpQixHQUFHLE1BQU1DLFFBQVFDLFVBQVUsQ0FBQztZQUM3RmhDLGlCQUFpQnlCO1lBQ2pCekIsaUJBQWlCMEI7WUFDakIxQixpQkFBaUIyQjtTQUNsQjtRQUVELElBQUlNLFdBQVcsRUFBRTtRQUVqQixJQUFJTCxpQkFBaUJNLE1BQU0sS0FBSyxlQUFlTixpQkFBaUJPLEtBQUssQ0FBQ2xCLEVBQUUsRUFBRTtZQUN4RSxNQUFNbUIsT0FBTyxNQUFNUixpQkFBaUJPLEtBQUssQ0FBQ2hCLElBQUk7WUFDOUMsSUFBSWlCLFFBQVFDLE1BQU1DLE9BQU8sQ0FBQ0YsS0FBS0gsUUFBUSxHQUFHO2dCQUN4Q0EsU0FBU00sSUFBSSxJQUFJSCxLQUFLSCxRQUFRLENBQUNPLEdBQUcsQ0FBQ3ZFO1lBQ3JDO1FBQ0YsT0FBTztZQUNMcUQsUUFBUUMsS0FBSyxDQUFDLDRDQUE0Q0ssaUJBQWlCYSxNQUFNLElBQUliLGlCQUFpQk8sS0FBSyxFQUFFTztRQUMvRztRQUVBLElBQUliLHdCQUF3QkssTUFBTSxLQUFLLGVBQWVMLHdCQUF3Qk0sS0FBSyxDQUFDbEIsRUFBRSxFQUFFO1lBQ3BGLE1BQU1tQixPQUFPLE1BQU1QLHdCQUF3Qk0sS0FBSyxDQUFDaEIsSUFBSTtZQUNyRCxJQUFJaUIsUUFBUUMsTUFBTUMsT0FBTyxDQUFDRixLQUFLSCxRQUFRLEdBQUc7Z0JBQ3hDQSxTQUFTTSxJQUFJLElBQUlILEtBQUtILFFBQVEsQ0FBQ08sR0FBRyxDQUFDRyxDQUFBQSxJQUFLaEQsa0JBQWtCZ0QsR0FBRzdCO1lBQy9EO1FBQ0osT0FBTztZQUNIUSxRQUFRQyxLQUFLLENBQUMsbURBQW1ETSx3QkFBd0JZLE1BQU0sSUFBSVosd0JBQXdCTSxLQUFLLEVBQUVPO1FBQ3RJO1FBRUEsSUFBSVosaUJBQWlCSSxNQUFNLEtBQUssZUFBZUosaUJBQWlCSyxLQUFLLENBQUNsQixFQUFFLEVBQUU7WUFDdEUsTUFBTW1CLE9BQU8sTUFBTU4saUJBQWlCSyxLQUFLLENBQUNoQixJQUFJO1lBQzlDLElBQUlpQixRQUFRQyxNQUFNQyxPQUFPLENBQUNGLEtBQUtILFFBQVEsR0FBRztnQkFDeENBLFNBQVNNLElBQUksSUFBSUgsS0FBS0gsUUFBUSxDQUFDTyxHQUFHLENBQUNHLENBQUFBLElBQUs3QyxrQkFBa0I2QyxHQUFHNUI7WUFDL0Q7UUFDSixPQUFPO1lBQ0hPLFFBQVFDLEtBQUssQ0FBQyw0Q0FBNENPLGlCQUFpQlcsTUFBTSxJQUFJWCxpQkFBaUJLLEtBQUssRUFBRU87UUFDakg7UUFFQTdCLElBQUlxQixNQUFNLENBQUMsS0FBS2YsSUFBSSxDQUFDYztJQUN2QixFQUFFLE9BQU9WLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeENWLElBQUlxQixNQUFNLENBQUMsS0FBS2YsSUFBSSxDQUFDO1lBQUV5QixTQUFTO1FBQXFDO0lBQ3ZFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wZXJmdW1lLXRyYWNrZXIvLi9wYWdlcy9hcGkvZmV0Y2gtcHJvZHVjdHMuanM/MWJlMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBIZWxwZXIgdG8gc3RyaXAgSFRNTCB0YWdzIGZyb20gcHJvZHVjdCBkZXNjcmlwdGlvbnNcbmNvbnN0IHN0cmlwSHRtbCA9IChodG1sKSA9PiAoaHRtbCA/IGh0bWwucmVwbGFjZSgvPFtePl0qPj8vZ20sICcnKSA6ICcnKTtcblxuLy8gRmFsbGJhY2sgZXhjaGFuZ2UgcmF0ZXMgaW4gY2FzZSB0aGUgbGl2ZSBBUEkgZmFpbHMuXG5jb25zdCBGQUxMQkFDS19DQURfVE9fRVVSX1JBVEUgPSAwLjY4O1xuY29uc3QgRkFMTEJBQ0tfQUVEX1RPX0VVUl9SQVRFID0gMC4yNTtcblxuLy8gTWFwcyBwcm9kdWN0IGRhdGEgZm9yIE1pZGRsZSBFYXN0ZXJuIHBlcmZ1bWVzIChPcmlnaW5hbHMpXG5jb25zdCBtYXBNaWRkbGVFYXN0ZXJuUHJvZHVjdCA9IChwcm9kdWN0KSA9PiB7XG4gIGNvbnN0IHZhcmlhbnQgPSBwcm9kdWN0LnZhcmlhbnRzLmxlbmd0aCA+IDAgPyBwcm9kdWN0LnZhcmlhbnRzWzBdIDogbnVsbDtcbiAgY29uc3QgcHJpY2UgPSB2YXJpYW50ID8gcGFyc2VGbG9hdCh2YXJpYW50LnByaWNlKSA6IDA7XG4gIGNvbnN0IGltYWdlID0gcHJvZHVjdC5pbWFnZXMubGVuZ3RoID4gMCA/IHByb2R1Y3QuaW1hZ2VzWzBdLnNyYyA6IG51bGw7XG5cbiAgcmV0dXJuIHtcbiAgICBpZDogYG1lLSR7cHJvZHVjdC5pZH1gLFxuICAgIGJyYW5kOiBwcm9kdWN0LnZlbmRvcixcbiAgICBuYW1lOiBwcm9kdWN0LnRpdGxlLFxuICAgIGRldGFpbHM6IHN0cmlwSHRtbChwcm9kdWN0LmJvZHlfaHRtbCksXG4gICAgbm9kZTogcHJvZHVjdC5wcm9kdWN0X3R5cGUgfHwgJ1BlcmZ1bWUnLFxuICAgIHByaWNlOiBwcmljZSwgLy8gUHJpY2UgaXMgYWxyZWFkeSBpbiBFVVJcbiAgICBjdXJyZW5jeTogJ0VVUicsXG4gICAgaW1hZ2U6IGltYWdlLFxuICAgIGlzUmVwbGljYTogZmFsc2UsXG4gICAgcmVnaW9uOiAnbWlkZGxlLWVhc3QnLFxuICAgIHNvdXJjZTogJ2R1YmFpb3VkLmllJyxcbiAgICB2YXJpYW50SWQ6IHZhcmlhbnQgPyB2YXJpYW50LmlkIDogbnVsbCxcbiAgICBzb3VyY2VVcmw6IGBodHRwczovL2R1YmFpb3VkLmllL3Byb2R1Y3RzLyR7cHJvZHVjdC5oYW5kbGV9YCxcbiAgfTtcbn07XG5cbi8vIE1hcHMgcHJvZHVjdCBkYXRhIGZvciBXZXN0ZXJuIHBlcmZ1bWVzIChPcmlnaW5hbHMpXG5jb25zdCBtYXBXZXN0ZXJuUHJvZHVjdCA9IChwcm9kdWN0LCBleGNoYW5nZVJhdGUpID0+IHtcbiAgICBjb25zdCB2YXJpYW50ID0gcHJvZHVjdC52YXJpYW50cy5sZW5ndGggPiAwID8gcHJvZHVjdC52YXJpYW50c1swXSA6IG51bGw7XG4gICAgY29uc3QgcHJpY2VDQUQgPSB2YXJpYW50ID8gcGFyc2VGbG9hdCh2YXJpYW50LnByaWNlKSA6IDA7XG4gICAgY29uc3QgaW1hZ2UgPSBwcm9kdWN0LmltYWdlcy5sZW5ndGggPiAwID8gcHJvZHVjdC5pbWFnZXNbMF0uc3JjIDogbnVsbDtcbiAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBgdy0ke3Byb2R1Y3QuaWR9YCxcbiAgICAgIGJyYW5kOiBwcm9kdWN0LnZlbmRvcixcbiAgICAgIG5hbWU6IHByb2R1Y3QudGl0bGUsXG4gICAgICBkZXRhaWxzOiBzdHJpcEh0bWwocHJvZHVjdC5ib2R5X2h0bWwpLFxuICAgICAgbm9kZTogcHJvZHVjdC5wcm9kdWN0X3R5cGUgfHwgJ1BlcmZ1bWUnLFxuICAgICAgcHJpY2U6IHByaWNlQ0FEICogZXhjaGFuZ2VSYXRlLCAvLyBDb252ZXJ0IHByaWNlIGZyb20gQ0FEIHRvIEVVUlxuICAgICAgY3VycmVuY3k6ICdFVVInLFxuICAgICAgaW1hZ2U6IGltYWdlLFxuICAgICAgaXNSZXBsaWNhOiBmYWxzZSxcbiAgICAgIHJlZ2lvbjogJ3dlc3Rlcm4nLFxuICAgICAgc291cmNlOiAnd2VzdGVybnBlcmZ1bWVzLmNhJyxcbiAgICAgIHZhcmlhbnRJZDogbnVsbCxcbiAgICAgIHNvdXJjZVVybDogYGh0dHBzOi8vd2VzdGVybnBlcmZ1bWVzLmNhL3Byb2R1Y3RzLyR7cHJvZHVjdC5oYW5kbGV9YCxcbiAgICB9O1xufTtcblxuLy8gTWFwcyBwcm9kdWN0IGRhdGEgZm9yIFJlcGxpY2EgcGVyZnVtZXNcbmNvbnN0IG1hcFJlcGxpY2FQcm9kdWN0ID0gKHByb2R1Y3QsIGV4Y2hhbmdlUmF0ZSkgPT4ge1xuICAgIGNvbnN0IHZhcmlhbnQgPSBwcm9kdWN0LnZhcmlhbnRzLmxlbmd0aCA+IDAgPyBwcm9kdWN0LnZhcmlhbnRzWzBdIDogbnVsbDtcbiAgICBjb25zdCBwcmljZUFFRCA9IHZhcmlhbnQgPyBwYXJzZUZsb2F0KHZhcmlhbnQucHJpY2UpIDogMDtcbiAgICBjb25zdCBpbWFnZSA9IHByb2R1Y3QuaW1hZ2VzLmxlbmd0aCA+IDAgPyBwcm9kdWN0LmltYWdlc1swXS5zcmMgOiBudWxsO1xuICBcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGByZXAtJHtwcm9kdWN0LmlkfWAsXG4gICAgICBicmFuZDogcHJvZHVjdC52ZW5kb3IsXG4gICAgICBuYW1lOiBwcm9kdWN0LnRpdGxlLFxuICAgICAgZGV0YWlsczogc3RyaXBIdG1sKHByb2R1Y3QuYm9keV9odG1sKSxcbiAgICAgIG5vZGU6IHByb2R1Y3QucHJvZHVjdF90eXBlIHx8ICdQZXJmdW1lJyxcbiAgICAgIHByaWNlOiBwcmljZUFFRCAqIGV4Y2hhbmdlUmF0ZSwgLy8gQ29udmVydCBwcmljZSBmcm9tIEFFRCB0byBFVVJcbiAgICAgIGN1cnJlbmN5OiAnRVVSJyxcbiAgICAgIGltYWdlOiBpbWFnZSxcbiAgICAgIGlzUmVwbGljYTogdHJ1ZSxcbiAgICAgIHJlZ2lvbjogJ21pZGRsZS1lYXN0JyxcbiAgICAgIHNvdXJjZTogJ3BhcmZ1bS5hZScsXG4gICAgICB2YXJpYW50SWQ6IG51bGwsXG4gICAgICBzb3VyY2VVcmw6IGBodHRwczovL3BhcmZ1bS5hZS9wcm9kdWN0cy8ke3Byb2R1Y3QuaGFuZGxlfWAsXG4gICAgfTtcbn07XG5cbi8vIEhlbHBlciB0byBmZXRjaCB3aXRoIGEgdGltZW91dFxuY29uc3QgZmV0Y2hXaXRoVGltZW91dCA9ICh1cmwsIHRpbWVvdXQgPSAxMDAwMCkgPT4ge1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3QgaWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dCk7XG4gIFxuICAgIHJldHVybiBmZXRjaCh1cmwsIHsgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgICAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIC8vIEZldGNoIGxpdmUgZXhjaGFuZ2UgcmF0ZXNcbiAgbGV0IGNhZFRvRXVyUmF0ZSA9IEZBTExCQUNLX0NBRF9UT19FVVJfUkFURTtcbiAgbGV0IGFlZFRvRXVyUmF0ZSA9IEZBTExCQUNLX0FFRF9UT19FVVJfUkFURTtcblxuICB0cnkge1xuICAgIGNvbnN0IGNhZFJhdGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5mcmFua2Z1cnRlci5hcHAvbGF0ZXN0P2Zyb209Q0FEJnRvPUVVUicpO1xuICAgIGlmIChjYWRSYXRlUmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IHJhdGVEYXRhID0gYXdhaXQgY2FkUmF0ZVJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmIChyYXRlRGF0YSAmJiByYXRlRGF0YS5yYXRlcyAmJiByYXRlRGF0YS5yYXRlcy5FVVIpIHtcbiAgICAgICAgY2FkVG9FdXJSYXRlID0gcmF0ZURhdGEucmF0ZXMuRVVSO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignTGl2ZSBDQUQgZXhjaGFuZ2UgcmF0ZSBmb3JtYXQgaXMgaW52YWxpZCwgdXNpbmcgZmFsbGJhY2suJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBsaXZlIENBRCBleGNoYW5nZSByYXRlLCB1c2luZyBmYWxsYmFjay4nKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgQ0FEIGV4Y2hhbmdlIHJhdGUsIHVzaW5nIGZhbGxiYWNrOicsIGVycm9yKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgYWVkUmF0ZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmZyYW5rZnVydGVyLmFwcC9sYXRlc3Q/ZnJvbT1BRUQmdG89RVVSJyk7XG4gICAgaWYgKGFlZFJhdGVSZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgcmF0ZURhdGEgPSBhd2FpdCBhZWRSYXRlUmVzcG9uc2UuanNvbigpO1xuICAgICAgaWYgKHJhdGVEYXRhICYmIHJhdGVEYXRhLnJhdGVzICYmIHJhdGVEYXRhLnJhdGVzLkVVUikge1xuICAgICAgICBhZWRUb0V1clJhdGUgPSByYXRlRGF0YS5yYXRlcy5FVVI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdMaXZlIEFFRCBleGNoYW5nZSByYXRlIGZvcm1hdCBpcyBpbnZhbGlkLCB1c2luZyBmYWxsYmFjay4nKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGxpdmUgQUVEIGV4Y2hhbmdlIHJhdGUsIHVzaW5nIGZhbGxiYWNrLicpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBBRUQgZXhjaGFuZ2UgcmF0ZSwgdXNpbmcgZmFsbGJhY2s6JywgZXJyb3IpO1xuICB9XG5cbiAgY29uc3QgZHViYWlPdWRBcGlVcmwgPSAnaHR0cHM6Ly9kdWJhaW91ZC5pZS9wcm9kdWN0cy5qc29uP2xpbWl0PTI1MCc7XG4gIGNvbnN0IHdlc3Rlcm5QZXJmdW1lc0FwaVVybCA9ICdodHRwczovL3dlc3Rlcm5wZXJmdW1lcy5jYS9wcm9kdWN0cy5qc29uP2xpbWl0PTI1MCc7XG4gIGNvbnN0IHBhcmZ1bUFlQXBpVXJsID0gJ2h0dHBzOi8vcGFyZnVtLmFlL3Byb2R1Y3RzLmpzb24/bGltaXQ9MjUwJztcblxuICB0cnkge1xuICAgIGNvbnN0IFtkdWJhaU91ZFJlc3BvbnNlLCB3ZXN0ZXJuUGVyZnVtZXNSZXNwb25zZSwgcGFyZnVtQWVSZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoW1xuICAgICAgZmV0Y2hXaXRoVGltZW91dChkdWJhaU91ZEFwaVVybCksXG4gICAgICBmZXRjaFdpdGhUaW1lb3V0KHdlc3Rlcm5QZXJmdW1lc0FwaVVybCksXG4gICAgICBmZXRjaFdpdGhUaW1lb3V0KHBhcmZ1bUFlQXBpVXJsKSxcbiAgICBdKTtcblxuICAgIGxldCBwcm9kdWN0cyA9IFtdO1xuXG4gICAgaWYgKGR1YmFpT3VkUmVzcG9uc2Uuc3RhdHVzID09PSAnZnVsZmlsbGVkJyAmJiBkdWJhaU91ZFJlc3BvbnNlLnZhbHVlLm9rKSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgZHViYWlPdWRSZXNwb25zZS52YWx1ZS5qc29uKCk7XG4gICAgICBpZiAoZGF0YSAmJiBBcnJheS5pc0FycmF5KGRhdGEucHJvZHVjdHMpKSB7XG4gICAgICAgIHByb2R1Y3RzLnB1c2goLi4uZGF0YS5wcm9kdWN0cy5tYXAobWFwTWlkZGxlRWFzdGVyblByb2R1Y3QpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGRhdGEgZnJvbSBEdWJhaSBPdWQgQVBJOicsIGR1YmFpT3VkUmVzcG9uc2UucmVhc29uIHx8IGR1YmFpT3VkUmVzcG9uc2UudmFsdWU/LnN0YXR1c1RleHQpO1xuICAgIH1cblxuICAgIGlmICh3ZXN0ZXJuUGVyZnVtZXNSZXNwb25zZS5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIHdlc3Rlcm5QZXJmdW1lc1Jlc3BvbnNlLnZhbHVlLm9rKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB3ZXN0ZXJuUGVyZnVtZXNSZXNwb25zZS52YWx1ZS5qc29uKCk7XG4gICAgICAgIGlmIChkYXRhICYmIEFycmF5LmlzQXJyYXkoZGF0YS5wcm9kdWN0cykpIHtcbiAgICAgICAgICBwcm9kdWN0cy5wdXNoKC4uLmRhdGEucHJvZHVjdHMubWFwKHAgPT4gbWFwV2VzdGVyblByb2R1Y3QocCwgY2FkVG9FdXJSYXRlKSkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGRhdGEgZnJvbSBXZXN0ZXJuIFBlcmZ1bWVzIEFQSTonLCB3ZXN0ZXJuUGVyZnVtZXNSZXNwb25zZS5yZWFzb24gfHwgd2VzdGVyblBlcmZ1bWVzUmVzcG9uc2UudmFsdWU/LnN0YXR1c1RleHQpO1xuICAgIH1cblxuICAgIGlmIChwYXJmdW1BZVJlc3BvbnNlLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgJiYgcGFyZnVtQWVSZXNwb25zZS52YWx1ZS5vaykge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcGFyZnVtQWVSZXNwb25zZS52YWx1ZS5qc29uKCk7XG4gICAgICAgIGlmIChkYXRhICYmIEFycmF5LmlzQXJyYXkoZGF0YS5wcm9kdWN0cykpIHtcbiAgICAgICAgICBwcm9kdWN0cy5wdXNoKC4uLmRhdGEucHJvZHVjdHMubWFwKHAgPT4gbWFwUmVwbGljYVByb2R1Y3QocCwgYWVkVG9FdXJSYXRlKSkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGRhdGEgZnJvbSBQYXJmdW0uYWUgQVBJOicsIHBhcmZ1bUFlUmVzcG9uc2UucmVhc29uIHx8IHBhcmZ1bUFlUmVzcG9uc2UudmFsdWU/LnN0YXR1c1RleHQpO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHByb2R1Y3RzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0FuIGludGVybmFsIHNlcnZlciBlcnJvciBvY2N1cnJlZC4nIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbInN0cmlwSHRtbCIsImh0bWwiLCJyZXBsYWNlIiwiRkFMTEJBQ0tfQ0FEX1RPX0VVUl9SQVRFIiwiRkFMTEJBQ0tfQUVEX1RPX0VVUl9SQVRFIiwibWFwTWlkZGxlRWFzdGVyblByb2R1Y3QiLCJwcm9kdWN0IiwidmFyaWFudCIsInZhcmlhbnRzIiwibGVuZ3RoIiwicHJpY2UiLCJwYXJzZUZsb2F0IiwiaW1hZ2UiLCJpbWFnZXMiLCJzcmMiLCJpZCIsImJyYW5kIiwidmVuZG9yIiwibmFtZSIsInRpdGxlIiwiZGV0YWlscyIsImJvZHlfaHRtbCIsIm5vZGUiLCJwcm9kdWN0X3R5cGUiLCJjdXJyZW5jeSIsImlzUmVwbGljYSIsInJlZ2lvbiIsInNvdXJjZSIsInZhcmlhbnRJZCIsInNvdXJjZVVybCIsImhhbmRsZSIsIm1hcFdlc3Rlcm5Qcm9kdWN0IiwiZXhjaGFuZ2VSYXRlIiwicHJpY2VDQUQiLCJtYXBSZXBsaWNhUHJvZHVjdCIsInByaWNlQUVEIiwiZmV0Y2hXaXRoVGltZW91dCIsInVybCIsInRpbWVvdXQiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwic2V0VGltZW91dCIsImFib3J0IiwiZmV0Y2giLCJzaWduYWwiLCJmaW5hbGx5IiwiY2xlYXJUaW1lb3V0IiwiaGFuZGxlciIsInJlcSIsInJlcyIsImNhZFRvRXVyUmF0ZSIsImFlZFRvRXVyUmF0ZSIsImNhZFJhdGVSZXNwb25zZSIsIm9rIiwicmF0ZURhdGEiLCJqc29uIiwicmF0ZXMiLCJFVVIiLCJjb25zb2xlIiwiZXJyb3IiLCJhZWRSYXRlUmVzcG9uc2UiLCJkdWJhaU91ZEFwaVVybCIsIndlc3Rlcm5QZXJmdW1lc0FwaVVybCIsInBhcmZ1bUFlQXBpVXJsIiwiZHViYWlPdWRSZXNwb25zZSIsIndlc3Rlcm5QZXJmdW1lc1Jlc3BvbnNlIiwicGFyZnVtQWVSZXNwb25zZSIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwicHJvZHVjdHMiLCJzdGF0dXMiLCJ2YWx1ZSIsImRhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJwdXNoIiwibWFwIiwicmVhc29uIiwic3RhdHVzVGV4dCIsInAiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/fetch-products.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffetch-products&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfetch-products.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();